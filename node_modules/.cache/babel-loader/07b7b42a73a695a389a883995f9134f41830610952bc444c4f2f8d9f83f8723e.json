{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Monetizelab\\\\OneDrive\\\\Desktop\\\\trisDoc\\\\usainsurancereviews\\\\insurance-form\\\\src\\\\components\\\\LoadingDeals.js\",\n  _s = $RefreshSig$();\n// src/components/LoadingDeals.js\nimport React, { useContext, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FormDataContext } from \"../contexts/FormDataContext\";\nimport axios from \"axios\";\nimport \"./../LoadingDeals.css\"; // Custom CSS for the loading animation\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoadingDeals = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    formData,\n    setFormData\n  } = useContext(FormDataContext);\n  useEffect(() => {\n    const fetchCityFromZip = async zipCode => {\n      try {\n        const response = await axios.get(`https://api.zippopotam.us/us/${zipCode}`);\n        const cityName = response.data.places[0][\"place name\"];\n\n        // Update formData with the fetched city name and wait until the update is complete\n        setFormData(prevData => ({\n          ...prevData,\n          city: cityName\n        }));\n\n        // Use a delay to ensure the state is updated in React\n        setTimeout(() => {\n          navigate(\"/offers\");\n        }, 100); // A small delay to ensure the context state update completes\n      } catch (error) {\n        console.error(\"Error fetching city data:\", error);\n\n        // In case of error, still navigate but with a default city name\n        setFormData(prevData => ({\n          ...prevData,\n          city: \"your area\"\n        }));\n        setTimeout(() => {\n          navigate(\"/offers\");\n        }, 100);\n      }\n    };\n    if (formData.zipCode) {\n      fetchCityFromZip(formData.zipCode);\n    } else {\n      // If there's no zip code in formData, navigate to the offers page directly\n      navigate(\"/offers\");\n    }\n  }, [formData.zipCode, navigate, setFormData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-deals-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading-text\",\n      children: \"Looking for the best deals...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(LoadingDeals, \"qC4V4FZlWrQZxf5l7K6u7PB+Rv0=\", false, function () {\n  return [useNavigate];\n});\n_c = LoadingDeals;\nexport default LoadingDeals;\nvar _c;\n$RefreshReg$(_c, \"LoadingDeals\");","map":{"version":3,"names":["React","useContext","useEffect","useNavigate","FormDataContext","axios","jsxDEV","_jsxDEV","LoadingDeals","_s","navigate","formData","setFormData","fetchCityFromZip","zipCode","response","get","cityName","data","places","prevData","city","setTimeout","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Monetizelab/OneDrive/Desktop/trisDoc/usainsurancereviews/insurance-form/src/components/LoadingDeals.js"],"sourcesContent":["// src/components/LoadingDeals.js\r\nimport React, { useContext, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { FormDataContext } from \"../contexts/FormDataContext\";\r\nimport axios from \"axios\";\r\nimport \"./../LoadingDeals.css\"; // Custom CSS for the loading animation\r\n\r\nconst LoadingDeals = () => {\r\n  const navigate = useNavigate();\r\n  const { formData, setFormData } = useContext(FormDataContext);\r\n\r\n  useEffect(() => {\r\n    const fetchCityFromZip = async (zipCode) => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://api.zippopotam.us/us/${zipCode}`\r\n        );\r\n        const cityName = response.data.places[0][\"place name\"];\r\n\r\n        // Update formData with the fetched city name and wait until the update is complete\r\n        setFormData((prevData) => ({\r\n          ...prevData,\r\n          city: cityName,\r\n        }));\r\n\r\n        // Use a delay to ensure the state is updated in React\r\n        setTimeout(() => {\r\n          navigate(\"/offers\");\r\n        }, 100); // A small delay to ensure the context state update completes\r\n      } catch (error) {\r\n        console.error(\"Error fetching city data:\", error);\r\n\r\n        // In case of error, still navigate but with a default city name\r\n        setFormData((prevData) => ({\r\n          ...prevData,\r\n          city: \"your area\",\r\n        }));\r\n\r\n        setTimeout(() => {\r\n          navigate(\"/offers\");\r\n        }, 100);\r\n      }\r\n    };\r\n\r\n    if (formData.zipCode) {\r\n      fetchCityFromZip(formData.zipCode);\r\n    } else {\r\n      // If there's no zip code in formData, navigate to the offers page directly\r\n      navigate(\"/offers\");\r\n    }\r\n  }, [formData.zipCode, navigate, setFormData]);\r\n\r\n  return (\r\n    <div className=\"loading-deals-container\">\r\n      <div className=\"loading-spinner\"></div>\r\n      <p className=\"loading-text\">Looking for the best deals...</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingDeals;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACpD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,uBAAuB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEQ,QAAQ;IAAEC;EAAY,CAAC,GAAGX,UAAU,CAACG,eAAe,CAAC;EAE7DF,SAAS,CAAC,MAAM;IACd,MAAMW,gBAAgB,GAAG,MAAOC,OAAO,IAAK;MAC1C,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAG,CAC9B,gCAAgCF,OAAO,EACzC,CAAC;QACD,MAAMG,QAAQ,GAAGF,QAAQ,CAACG,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;;QAEtD;QACAP,WAAW,CAAEQ,QAAQ,KAAM;UACzB,GAAGA,QAAQ;UACXC,IAAI,EAAEJ;QACR,CAAC,CAAC,CAAC;;QAEH;QACAK,UAAU,CAAC,MAAM;UACfZ,QAAQ,CAAC,SAAS,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,OAAOa,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;;QAEjD;QACAX,WAAW,CAAEQ,QAAQ,KAAM;UACzB,GAAGA,QAAQ;UACXC,IAAI,EAAE;QACR,CAAC,CAAC,CAAC;QAEHC,UAAU,CAAC,MAAM;UACfZ,QAAQ,CAAC,SAAS,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC;MACT;IACF,CAAC;IAED,IAAIC,QAAQ,CAACG,OAAO,EAAE;MACpBD,gBAAgB,CAACF,QAAQ,CAACG,OAAO,CAAC;IACpC,CAAC,MAAM;MACL;MACAJ,QAAQ,CAAC,SAAS,CAAC;IACrB;EACF,CAAC,EAAE,CAACC,QAAQ,CAACG,OAAO,EAAEJ,QAAQ,EAAEE,WAAW,CAAC,CAAC;EAE7C,oBACEL,OAAA;IAAKkB,SAAS,EAAC,yBAAyB;IAAAC,QAAA,gBACtCnB,OAAA;MAAKkB,SAAS,EAAC;IAAiB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACvCvB,OAAA;MAAGkB,SAAS,EAAC,cAAc;MAAAC,QAAA,EAAC;IAA6B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1D,CAAC;AAEV,CAAC;AAACrB,EAAA,CAnDID,YAAY;EAAA,QACCL,WAAW;AAAA;AAAA4B,EAAA,GADxBvB,YAAY;AAqDlB,eAAeA,YAAY;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}