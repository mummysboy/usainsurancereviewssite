{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import\"../../styles/flowOne/OffersPage.css\";import{CSSTransition}from\"react-transition-group\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OffersPage=()=>{const[cityName,setCityName]=useState(\"your area\");useEffect(()=>{const params=new URLSearchParams(location.search);const zipCode=params.get(\"zip\")||localStorage.getItem(\"zip_code\")||\"00000\";const insured=params.get(\"insured\")||localStorage.getItem(\"insured\");const numVehicles=params.get(\"vehicles\")||localStorage.getItem(\"numVehicles\");const numDrivers=params.get(\"drivers\")||localStorage.getItem(\"numDrivers\");const homeOwnership=params.get(\"home_ownership\")||localStorage.getItem(\"home_ownership\")||\"00000\";const campaignName=params.get(\"campaign_name\")||localStorage.getItem(\"campaign_name\")||\"default_campaign\";const campaignId=params.get(\"campaign_id\")||localStorage.getItem(\"campaign_id\")||\"default_id\";const clickId=params.get(\"click_id\")||localStorage.getItem(\"click_id\")||\"default_click\";// Load the MediaAlpha ad script with campaign data\nconst script=document.createElement(\"script\");script.type=\"text/javascript\";script.innerHTML=`\n      var MediaAlphaExchange = {\n         \"data\": {\n            \"zip\": \"${zipCode}\",\n            \"currently_insured\": \"${insured}\",\n            \"vehicles[]\": \"${numVehicles}\",\n            \"drivers[]\": \"${numDrivers}\",\n            \"home_ownership\": \"${homeOwnership}\"\n         },\n         \"placement_id\": \"fD4petSMP9HeM2IAYex88RKg0siJ_Q\",\n         \"sub_1\": \"${campaignName}\",\n         \"sub_2\": \"${campaignId}\",\n         \"sub_3\": \"${clickId}\",\n         \"type\": \"ad_unit\",\n         \"version\": 17\n      };\n      MediaAlphaExchange__load('mediaalpha_placeholder');\n    `;document.body.appendChild(script);// Fetch city name from ZIP code\nif(zipCode!==\"00000\"){fetchCityName(zipCode);}const addStarRatings=()=>{// Select the specific elements with the provided class names\nconst offerElements=document.querySelectorAll(\".mav-partner.js-media-alpha-partner.mav-partner__standard.collapsible.collapsed, .mav-partner.js-media-alpha-partner.mav-partner__featured.collapsible.collapsed\");offerElements.forEach((offerElement,index)=>{// Check if stars are already added to avoid duplicates\nif(offerElement.querySelector(\".star-overlay\")){return;// If stars are already present, skip adding\n}// Create the star overlay\nconst starOverlay=document.createElement(\"div\");starOverlay.className=\"star-overlay\";starOverlay.setAttribute(\"data-rating\",`offer-${index}`);// Adding an attribute for easier debugging\n// Set the star rating (start with 5 and decrement by 1 for each listing)\nlet rating=5-index;if(rating<1){rating=1;// Ensure that rating does not go below 1 star\n}// Add stars\nfor(let i=1;i<=5;i++){const star=document.createElement(\"span\");star.className=\"star\"+(i<=rating?\" filled\":\"\");star.innerHTML=\"★\";starOverlay.appendChild(star);}// Append the star overlay to the offer card (the full container)\nofferElement.style.position=\"relative\";// Ensure the offer container is positioned relative\nofferElement.appendChild(starOverlay);});};// Use MutationObserver to detect changes and call the function when MediaAlpha ads are loaded\nconst observer=new MutationObserver(mutations=>{mutations.forEach(mutation=>{if(mutation.addedNodes.length){console.log(\"Mutation detected:\",mutation);addStarRatings();}});});const targetNode=document.getElementById(\"mediaalpha_placeholder\");if(targetNode){observer.observe(targetNode,{childList:true,subtree:true});}},[]);const fetchCityName=async zipCode=>{try{const response=await fetch(`https://api.zippopotam.us/us/${zipCode}`);if(response.ok){const data=await response.json();const city=data.places[0][\"place name\"];setCityName(city);}}catch(error){console.error(\"Failed to fetch city name:\",error);}};return/*#__PURE__*/_jsx(CSSTransition,{in:true,appear:true,timeout:1500,classNames:\"fade-slide\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"offers-page-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offers-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"We've Matched You with Great Offers in \",cityName,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"subtext\",children:[\"USA Insurance Reviews works with many reverse-bidding insurance companies. Based on your answers, we have matched you with the top aggregator in \",cityName,\" that can get you the best possible deal.\"]}),\"Click View My Quote to see the best prices.\",/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"offers-list\",children:/*#__PURE__*/_jsx(\"div\",{id:\"mediaalpha_placeholder\",className:\"mediaalpha-container\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"powered-by-text\",children:[\"Powered by \",/*#__PURE__*/_jsx(\"span\",{className:\"brand\",children:\"usainsurancereviews.com\"})]})]}),/*#__PURE__*/_jsx(Footer,{})]})});};export default OffersPage;","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","CSSTransition","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OffersPage","cityName","setCityName","params","URLSearchParams","location","search","zipCode","get","localStorage","getItem","insured","numVehicles","numDrivers","homeOwnership","campaignName","campaignId","clickId","script","document","createElement","type","innerHTML","body","appendChild","fetchCityName","addStarRatings","offerElements","querySelectorAll","forEach","offerElement","index","querySelector","starOverlay","className","setAttribute","rating","i","star","style","position","observer","MutationObserver","mutations","mutation","addedNodes","length","console","log","targetNode","getElementById","observe","childList","subtree","response","fetch","ok","data","json","city","places","error","in","appear","timeout","classNames","children","id"],"sources":["C:/Users/Monetizelab/OneDrive/Desktop/trisDoc/usainsurancereviews/insurance-form/src/components/UserFlowOne/OffersPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport \"../../styles/flowOne/OffersPage.css\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\nconst OffersPage = () => {\r\n  const [cityName, setCityName] = useState(\"your area\");\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n\r\n    const zipCode =\r\n      params.get(\"zip\") || localStorage.getItem(\"zip_code\") || \"00000\";\r\n    const insured = params.get(\"insured\") || localStorage.getItem(\"insured\");\r\n    const numVehicles =\r\n      params.get(\"vehicles\") || localStorage.getItem(\"numVehicles\");\r\n    const numDrivers =\r\n      params.get(\"drivers\") || localStorage.getItem(\"numDrivers\");\r\n    const homeOwnership =\r\n      params.get(\"home_ownership\") ||\r\n      localStorage.getItem(\"home_ownership\") ||\r\n      \"00000\";\r\n    const campaignName =\r\n      params.get(\"campaign_name\") ||\r\n      localStorage.getItem(\"campaign_name\") ||\r\n      \"default_campaign\";\r\n    const campaignId =\r\n      params.get(\"campaign_id\") ||\r\n      localStorage.getItem(\"campaign_id\") ||\r\n      \"default_id\";\r\n    const clickId =\r\n      params.get(\"click_id\") ||\r\n      localStorage.getItem(\"click_id\") ||\r\n      \"default_click\";\r\n\r\n    // Load the MediaAlpha ad script with campaign data\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.innerHTML = `\r\n      var MediaAlphaExchange = {\r\n         \"data\": {\r\n            \"zip\": \"${zipCode}\",\r\n            \"currently_insured\": \"${insured}\",\r\n            \"vehicles[]\": \"${numVehicles}\",\r\n            \"drivers[]\": \"${numDrivers}\",\r\n            \"home_ownership\": \"${homeOwnership}\"\r\n         },\r\n         \"placement_id\": \"fD4petSMP9HeM2IAYex88RKg0siJ_Q\",\r\n         \"sub_1\": \"${campaignName}\",\r\n         \"sub_2\": \"${campaignId}\",\r\n         \"sub_3\": \"${clickId}\",\r\n         \"type\": \"ad_unit\",\r\n         \"version\": 17\r\n      };\r\n      MediaAlphaExchange__load('mediaalpha_placeholder');\r\n    `;\r\n    document.body.appendChild(script);\r\n\r\n    // Fetch city name from ZIP code\r\n    if (zipCode !== \"00000\") {\r\n      fetchCityName(zipCode);\r\n    }\r\n\r\n    const addStarRatings = () => {\r\n      // Select the specific elements with the provided class names\r\n      const offerElements = document.querySelectorAll(\r\n        \".mav-partner.js-media-alpha-partner.mav-partner__standard.collapsible.collapsed, .mav-partner.js-media-alpha-partner.mav-partner__featured.collapsible.collapsed\"\r\n      );\r\n\r\n      offerElements.forEach((offerElement, index) => {\r\n        // Check if stars are already added to avoid duplicates\r\n        if (offerElement.querySelector(\".star-overlay\")) {\r\n          return; // If stars are already present, skip adding\r\n        }\r\n\r\n        // Create the star overlay\r\n        const starOverlay = document.createElement(\"div\");\r\n        starOverlay.className = \"star-overlay\";\r\n        starOverlay.setAttribute(\"data-rating\", `offer-${index}`); // Adding an attribute for easier debugging\r\n\r\n        // Set the star rating (start with 5 and decrement by 1 for each listing)\r\n        let rating = 5 - index;\r\n        if (rating < 1) {\r\n          rating = 1; // Ensure that rating does not go below 1 star\r\n        }\r\n\r\n        // Add stars\r\n        for (let i = 1; i <= 5; i++) {\r\n          const star = document.createElement(\"span\");\r\n          star.className = \"star\" + (i <= rating ? \" filled\" : \"\");\r\n          star.innerHTML = \"★\";\r\n          starOverlay.appendChild(star);\r\n        }\r\n\r\n        // Append the star overlay to the offer card (the full container)\r\n        offerElement.style.position = \"relative\"; // Ensure the offer container is positioned relative\r\n        offerElement.appendChild(starOverlay);\r\n      });\r\n    };\r\n\r\n    // Use MutationObserver to detect changes and call the function when MediaAlpha ads are loaded\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach((mutation) => {\r\n        if (mutation.addedNodes.length) {\r\n          console.log(\"Mutation detected:\", mutation);\r\n          addStarRatings();\r\n        }\r\n      });\r\n    });\r\n\r\n    const targetNode = document.getElementById(\"mediaalpha_placeholder\");\r\n    if (targetNode) {\r\n      observer.observe(targetNode, { childList: true, subtree: true });\r\n    }\r\n  }, []);\r\n\r\n  const fetchCityName = async (zipCode) => {\r\n    try {\r\n      const response = await fetch(`https://api.zippopotam.us/us/${zipCode}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const city = data.places[0][\"place name\"];\r\n        setCityName(city);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch city name:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={true}\r\n      appear={true}\r\n      timeout={1500}\r\n      classNames=\"fade-slide\"\r\n    >\r\n      <>\r\n        <Header />\r\n        <div className=\"offers-page-container\">\r\n          <div className=\"offers-header\">\r\n            <h2>We've Matched You with Great Offers in {cityName}!</h2>\r\n            <p className=\"subtext\">\r\n              USA Insurance Reviews works with many reverse-bidding insurance\r\n              companies. Based on your answers, we have matched you with the top\r\n              aggregator in {cityName} that can get you the best possible deal.\r\n            </p>\r\n            Click View My Quote to see the best prices.\r\n            <p></p>\r\n          </div>\r\n\r\n          <div className=\"offers-list\">\r\n            {/* Placeholder for the MediaAlpha ad unit */}\r\n            <div\r\n              id=\"mediaalpha_placeholder\"\r\n              className=\"mediaalpha-container\"\r\n            ></div>\r\n          </div>\r\n\r\n          <p className=\"powered-by-text\">\r\n            Powered by <span className=\"brand\">usainsurancereviews.com</span>\r\n          </p>\r\n        </div>\r\n        <Footer />\r\n      </>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default OffersPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}